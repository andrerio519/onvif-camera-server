<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONVIF PTZ Camera Control System</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Toast Container -->
    <div id="notification-container" class="position-fixed top-0 end-0 p-3" style="z-index: 9999;"></div>

    <!-- Main Container -->
    <div class="container-fluid">
        <!-- Header -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h1 class="h3 mb-1">
                                    <i class="bi bi-camera-video-fill text-primary"></i>
                                    ONVIF PTZ Camera Control
                                </h1>
                                <p class="text-muted mb-0 small">Real-time camera control & streaming system</p>
                            </div>
                            <div class="connection-status" id="connection-status">
                                <span class="badge bg-danger">
                                    <i class="bi bi-circle-fill me-1"></i>Offline
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Row -->
        <div class="row g-3">
            <!-- Sidebar Navigation -->
            <div class="col-lg-2 col-md-3">
                <div class="card shadow-sm sticky-top" style="top: 20px;">
                    <div class="list-group list-group-flush">
                        <a href="#" class="list-group-item list-group-item-action active"
                            onclick="showSection('live'); return false;">
                            <i class="bi bi-play-circle me-2"></i>Live View
                        </a>
                        <a href="#" class="list-group-item list-group-item-action"
                            onclick="showSection('ptz'); return false;">
                            <i class="bi bi-joystick me-2"></i>PTZ Control
                        </a>
                        <a href="#" class="list-group-item list-group-item-action"
                            onclick="showSection('image'); return false;">
                            <i class="bi bi-image me-2"></i>Image Settings
                        </a>
                        <a href="#" class="list-group-item list-group-item-action"
                            onclick="showSection('audio'); return false;">
                            <i class="bi bi-volume-up me-2"></i>Audio
                        </a>
                        <a href="#" class="list-group-item list-group-item-action"
                            onclick="showSection('detection'); return false;">
                            <i class="bi bi-exclamation-triangle me-2"></i>Detection
                        </a>
                        <a href="#" class="list-group-item list-group-item-action"
                            onclick="showSection('recording'); return false;">
                            <i class="bi bi-record-circle me-2"></i>Recording
                        </a>
                        <a href="#" class="list-group-item list-group-item-action"
                            onclick="showSection('system'); return false;">
                            <i class="bi bi-gear me-2"></i>System Info
                        </a>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="col-lg-10 col-md-9">
                <div class="row g-3">
                    <!-- Left Column: Video & Controls -->
                    <div class="col-lg-8">
                        <!-- Live Video Section -->
                        <div class="card shadow-sm mb-3" id="section-live">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0"><i class="bi bi-camera-video me-2"></i>Live Stream</h5>
                            </div>
                            <div class="card-body">
                                <!-- Video Stats -->
                                <div class="row g-2 mb-3">
                                    <div class="col-6 col-lg-3">
                                        <div class="p-2 bg-light rounded text-center">
                                            <small class="text-muted d-block">Status</small>
                                            <strong id="status-value" class="text-danger">Offline</strong>
                                        </div>
                                    </div>
                                    <div class="col-6 col-lg-3">
                                        <div class="p-2 bg-light rounded text-center">
                                            <small class="text-muted d-block">Resolution</small>
                                            <strong id="resolution-value">-</strong>
                                        </div>
                                    </div>
                                    <div class="col-6 col-lg-3">
                                        <div class="p-2 bg-light rounded text-center">
                                            <small class="text-muted d-block">FPS</small>
                                            <strong id="fps-value">-</strong>
                                        </div>
                                    </div>
                                    <div class="col-6 col-lg-3">
                                        <div class="p-2 bg-light rounded text-center">
                                            <small class="text-muted d-block">Bitrate</small>
                                            <strong id="bitrate-value">-</strong>
                                        </div>
                                    </div>
                                </div>

                                <!-- Video Container -->
                                <div class="video-container ratio ratio-16x9 bg-dark rounded mb-3">
                                    <div class="d-flex align-items-center justify-content-center text-white flex-column"
                                        id="video-placeholder-content">
                                        <i class="bi bi-camera-video display-1 mb-3 opacity-50"></i>
                                        <h5>Stream Belum Tersedia</h5>
                                        <p class="text-muted">Hubungkan ke kamera untuk memulai streaming</p>
                                    </div>
                                    <div class="connecting-overlay" id="connecting-indicator">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                        <p class="mt-3">Menyambungkan...</p>
                                    </div>
                                </div>

                                <!-- Stream Controls -->
                                <div class="d-grid gap-2 d-md-flex">
                                    <button class="btn btn-success flex-fill" onclick="loadStream()"
                                        id="btn-start-stream" disabled>
                                        <i class="bi bi-play-fill me-2"></i>Mulai Stream
                                    </button>
                                    <button class="btn btn-danger flex-fill" onclick="stopStream()" id="btn-stop-stream"
                                        disabled>
                                        <i class="bi bi-stop-fill me-2"></i>Stop Stream
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- PTZ Control Section (Hidden by default) -->
                        <div class="card shadow-sm mb-3 d-none" id="section-ptz">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0"><i class="bi bi-joystick me-2"></i>PTZ Control</h5>
                            </div>
                            <div class="card-body">
                                <!-- Speed Control -->
                                <div class="mb-4">
                                    <label class="form-label">Kecepatan Gerakan: <strong
                                            id="speed-value">0.5x</strong></label>
                                    <input type="range" class="form-range" id="ptz-speed" min="0.1" max="1" step="0.1"
                                        value="0.5">
                                </div>

                                <!-- Direction Controls -->
                                <div class="row g-2 mb-3">
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('upleft')" id="ptz-upleft" disabled>
                                            <i class="bi bi-arrow-up-left"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn" onclick="ptzMove('up')"
                                            id="ptz-up" disabled>
                                            <i class="bi bi-arrow-up"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('upright')" id="ptz-upright" disabled>
                                            <i class="bi bi-arrow-up-right"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('left')" id="ptz-left" disabled>
                                            <i class="bi bi-arrow-left"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-danger w-100" onclick="ptzStop()" id="ptz-stop" disabled>
                                            <i class="bi bi-stop-circle"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('right')" id="ptz-right" disabled>
                                            <i class="bi bi-arrow-right"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('downleft')" id="ptz-downleft" disabled>
                                            <i class="bi bi-arrow-down-left"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('down')" id="ptz-down" disabled>
                                            <i class="bi bi-arrow-down"></i>
                                        </button>
                                    </div>
                                    <div class="col-4">
                                        <button class="btn btn-outline-secondary w-100 ptz-btn"
                                            onclick="ptzMove('downright')" id="ptz-downright" disabled>
                                            <i class="bi bi-arrow-down-right"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Zoom Controls -->
                                <div class="row g-2">
                                    <div class="col-6">
                                        <button class="btn btn-primary w-100" onclick="ptzZoom('in')" id="zoom-in"
                                            disabled>
                                            <i class="bi bi-zoom-in me-2"></i>Zoom In
                                        </button>
                                    </div>
                                    <div class="col-6">
                                        <button class="btn btn-primary w-100" onclick="ptzZoom('out')" id="zoom-out"
                                            disabled>
                                            <i class="bi bi-zoom-out me-2"></i>Zoom Out
                                        </button>
                                    </div>
                                </div>

                                <!-- Preset Management -->
                                <hr class="my-4">
                                <h6 class="mb-3"><i class="bi bi-bookmark me-2"></i>Preset Positions</h6>

                                <div class="mb-3" style="max-height: 300px; overflow-y: auto;" id="preset-list">
                                    <div class="alert alert-info">
                                        <i class="bi bi-info-circle me-2"></i>Tidak ada preset tersedia
                                    </div>
                                </div>

                                <div class="input-group mb-2">
                                    <input type="text" class="form-control" id="preset-name"
                                        placeholder="Nama preset baru" disabled>
                                    <button class="btn btn-success" onclick="savePreset()" id="btn-save-preset"
                                        disabled>
                                        <i class="bi bi-save me-1"></i>Simpan
                                    </button>
                                </div>

                                <button class="btn btn-outline-secondary w-100" onclick="loadPresets()"
                                    id="btn-refresh-presets" disabled>
                                    <i class="bi bi-arrow-clockwise me-2"></i>Refresh Presets
                                </button>
                            </div>
                        </div>

                        <!-- Image Settings Section (Hidden) -->
                        <div class="card shadow-sm mb-3 d-none" id="section-image">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0"><i class="bi bi-image me-2"></i>Image Settings</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Brightness: <strong
                                            id="brightness-val">50</strong></label>
                                    <input type="range" class="form-range" id="brightness" min="0" max="100" value="50">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Contrast: <strong id="contrast-val">50</strong></label>
                                    <input type="range" class="form-range" id="contrast" min="0" max="100" value="50">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Saturation: <strong
                                            id="saturation-val">50</strong></label>
                                    <input type="range" class="form-range" id="saturation" min="0" max="100" value="50">
                                </div>
                                <button class="btn btn-primary w-100" onclick="applyImageSettings()">
                                    <i class="bi bi-check-circle me-2"></i>Apply Settings
                                </button>
                            </div>
                        </div>

                        <!-- Other sections similar structure... -->
                    </div>

                    <!-- Right Column: Connection Settings -->
                    <div class="col-lg-4">
                        <div class="card shadow-sm sticky-top" style="top: 20px;">
                            <div class="card-header bg-secondary text-white">
                                <h5 class="mb-0"><i class="bi bi-gear me-2"></i>Pengaturan Kamera</h5>
                            </div>
                            <div class="card-body">
                                <form onsubmit="return false;">
                                    <div class="mb-3">
                                        <label class="form-label">IP Address</label>
                                        <input type="text" class="form-control" id="cameraIp" value="192.168.1.9"
                                            placeholder="192.168.1.100">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Port ONVIF</label>
                                        <input type="number" class="form-control" id="onvifPort" value="835"
                                            placeholder="80">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Username</label>
                                        <input type="text" class="form-control" id="username" value="avarocam">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Password</label>
                                        <input type="password" class="form-control" id="password">
                                    </div>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-primary" onclick="connectCamera()" id="btn-connect">
                                            <i class="bi bi-plug me-2"></i>Hubungkan
                                        </button>
                                        <button class="btn btn-danger" onclick="disconnectCamera()" id="btn-disconnect"
                                            disabled>
                                            <i class="bi bi-x-circle me-2"></i>Putuskan
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>